events {}

http {
    server {
        listen 8080;

        location /channel/ {
            alias /app/hls/;
            add_header Cache-Control "no-cache" always;
            add_header Access-Control-Allow-Origin * always;
            add_header Access-Control-Allow-Methods "GET,HEAD,OPTIONS" always;
            add_header Access-Control-Allow-Headers "Origin,Accept,Range,Content-Type" always;
            add_header Access-Control-Expose-Headers "Content-Length,Content-Range" always;

            if ($request_method = OPTIONS) {
                return 204;
            }
        }
    }
}

